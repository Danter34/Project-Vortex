@model Vortex.Models.FeedbackResponseViewModel

<main class="container main-container p-4" style="max-width: 1200px;">
    <div class="container my-5">
        <h1 class="page-title text-center mb-5">LIÊN HỆ VỚI CHÚNG TÔI</h1>

        @if (TempData["Error"] != null)
        {
            <div class="alert alert-danger text-center">@TempData["Error"]</div>
        }
        @if (TempData["Success"] != null)
        {
            <div class="alert alert-success text-center">@TempData["Success"]</div>
        }

        <div class="row g-5">
            <!-- Form liên hệ -->
            <div class="col-lg-6">
                <div class="card-base p-4">
                    <h4>Gửi tin nhắn</h4>

                    @if (Model == null || Model.Status != "Đã phản hồi")
                    {
                        <form method="post" asp-action="SendFeedback" class="mt-3 contact-form">
                            <div class="form-floating mb-3">
                                <textarea name="message" class="form-control" id="contactMessage" placeholder="Nội dung" style="height: 150px"></textarea>
                                <label for="contactMessage">Nội dung phản hồi</label>
                            </div>
                            <button type="submit" class="btn btn-auth w-100">Gửi đi</button>
                        </form>
                    }
                    else
                    {
                        <div class="alert alert-info mt-3">
                            Bạn đã gửi phản hồi và admin đã trả lời. Không thể gửi thêm phản hồi mới.
                        </div>
                    }

                    @if (Model != null)
                    {
                        <hr />
                        <h5>Phản hồi gần nhất:</h5>
                        <p><strong>Nội dung:</strong> @Model.Message</p>
                        <p>
                            <strong>Trạng thái:</strong>
                            @if (Model.Status == "Chờ phản hồi")
                            {
                                <span class="badge bg-warning text-dark">Chờ phản hồi</span>
                            }
                            else if (Model.Status == "Đã phản hồi")
                            {
                                <span class="badge bg-success">Đã phản hồi</span>
                            }
                            else
                            {
                                <span class="badge bg-secondary">@Model.Status</span>
                            }
                        </p>

                        @if (!string.IsNullOrEmpty(Model.AdminReply))
                        {
                            <p><strong>Trả lời từ Admin:</strong> @Model.AdminReply</p>
                        }
                    }
                </div>
            </div>

            <!-- Thông tin liên lạc -->
            <div class="col-lg-6">
                <div class="card-base p-4 h-100">
                    <h4>Thông tin liên lạc</h4>
                    <ul class="list-unstyled contact-info mt-3">
                        <li><i class="fas fa-map-marker-alt"></i><span>123 Gaming Street, District 1, Ho Chi Minh City, Vietnam</span></li>
                        <li><i class="fas fa-phone"></i><span>(028) 3344 5566</span></li>
                        <li><i class="fas fa-envelope"></i><span>contact@vortexplay.vn</span></li>
                        <li><i class="fas fa-clock"></i><span>Giờ làm việc: 9:00 - 21:00, Thứ 2 - Chủ Nhật</span></li>
                    </ul>

                    <div class="map-container mt-4">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3919.447011383884!2d106.70203331535948!3d10.77703899232079!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31752f469b8d2347%3A0x29ac59ba298a77a!2sBitexco%20Financial%20Tower!5e0!3m2!1sen!2svn!4v1685000000000!5m2!1sen!2svn"
                                width="100%" height="250" style="border:0;" allowfullscreen="" loading="lazy"
                                referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
